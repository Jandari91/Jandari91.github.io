<!DOCTYPE html><html lang="ko" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="4장. 유스케이스 구현하기" /><meta name="author" content="Jandari" /><meta property="og:locale" content="ko" /><meta name="description" content="소개" /><meta property="og:description" content="소개" /><link rel="canonical" href="https://jandari91.github.io/posts/MakeLearnCleanArchitecture_ch4/" /><meta property="og:url" content="https://jandari91.github.io/posts/MakeLearnCleanArchitecture_ch4/" /><meta property="og:site_name" content="잔다리 블로그" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-04-17T22:20:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="4장. 유스케이스 구현하기" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Jandari" /><meta name="google-site-verification" content="da_LBuBJEqXgeCF1kMfTTgAPN1j1AqAZOSfvbZ512vw" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jandari"},"dateModified":"2022-04-17T22:20:00+09:00","datePublished":"2022-04-17T22:20:00+09:00","description":"소개","headline":"4장. 유스케이스 구현하기","mainEntityOfPage":{"@type":"WebPage","@id":"https://jandari91.github.io/posts/MakeLearnCleanArchitecture_ch4/"},"url":"https://jandari91.github.io/posts/MakeLearnCleanArchitecture_ch4/"}</script><title>4장. 유스케이스 구현하기 | 잔다리 블로그</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.jpg"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.jpg"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.jpg"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="잔다리 블로그"><meta name="application-name" content="잔다리 블로그"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/favicons/android-chrome-192x192.jpg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">잔다리 블로그</a></div><div class="site-subtitle font-italic">이것저것 기술 블로그 입니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/Jandari91" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['jandari910201','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>4장. 유스케이스 구현하기</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>4장. 유스케이스 구현하기</h1><div class="post-meta text-muted"><div> By <em> Jandari </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1650201600" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-04-17 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3638 words"> <em>20 min</em> read</span></div></div></div><div class="post-content"><h2 id="소개"><span class="mr-2">소개</span><a href="#소개" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/assets/img/post/2022-04-17-MakeLearnCleanArchitecture_ch4/1.jpg" alt="image" data-proofer-ignore></p><p>만들면서 배우는 클린 아키텍처 책을 읽고 정리하며 소감을 적는 포스트입니다.</p><h2 id="유스케이스-구현하기"><span class="mr-2">유스케이스 구현하기</span><a href="#유스케이스-구현하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>이전 포스트에서 만든 육각형 아키텍처에서 애플리케이션, 웹, 영속성 계층이 현재 아키텍처에서 아주 느슨하게 결합돼 있기 때문에 필요한 대로 도메인 코드를 자유롭게 모델링할 수 있다.</p><p>DDD를 할 수 있고, 풍부하거나(rich), 빈약한(anemic) 도메인 모델을 구현할 수도 있다.</p><h3 id="도메인-모델-구현하기"><span class="mr-2">도메인 모델 구현하기</span><a href="#도메인-모델-구현하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>한 계좌에서 다른 계좌로 송금하는 유스케이스를 구현해 본다.</p><p>입금과 출금을 할 수 있는 Account 엔티티를 만들고 출금 계좌에서 돈을 출금해서 입금 계좌로 돈을 입금하는 것이다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
</pre><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">buckpal.account.domain</span><span class="o">;</span>

<span class="nd">@AllArgsConstructor</span><span class="o">(</span><span class="n">access</span> <span class="o">=</span> <span class="nc">AccessLevel</span><span class="o">.</span><span class="na">PRIVATE</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Account</span> <span class="o">{</span>

	<span class="nd">@Getter</span> <span class="kd">private</span> <span class="kd">final</span> <span class="nc">AccountId</span> <span class="n">id</span><span class="o">;</span>

	<span class="nd">@Getter</span> <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Money</span> <span class="n">baselineBalance</span><span class="o">;</span>

	<span class="nd">@Getter</span> <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ActivityWindow</span> <span class="n">activityWindow</span><span class="o">;</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="nc">Account</span> <span class="nf">withoutId</span><span class="o">(</span>
					<span class="nc">Money</span> <span class="n">baselineBalance</span><span class="o">,</span>
					<span class="nc">ActivityWindow</span> <span class="n">activityWindow</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">new</span> <span class="nf">Account</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="n">baselineBalance</span><span class="o">,</span> <span class="n">activityWindow</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="nc">Account</span> <span class="nf">withId</span><span class="o">(</span>
					<span class="nc">AccountId</span> <span class="n">accountId</span><span class="o">,</span>
					<span class="nc">Money</span> <span class="n">baselineBalance</span><span class="o">,</span>
					<span class="nc">ActivityWindow</span> <span class="n">activityWindow</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">new</span> <span class="nf">Account</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> <span class="n">baselineBalance</span><span class="o">,</span> <span class="n">activityWindow</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">AccountId</span><span class="o">&gt;</span> <span class="nf">getId</span><span class="o">(){</span>
		<span class="k">return</span> <span class="nc">Optional</span><span class="o">.</span><span class="na">ofNullable</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">id</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="nc">Money</span> <span class="nf">calculateBalance</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="nc">Money</span><span class="o">.</span><span class="na">add</span><span class="o">(</span>
				<span class="k">this</span><span class="o">.</span><span class="na">baselineBalance</span><span class="o">,</span>
				<span class="k">this</span><span class="o">.</span><span class="na">activityWindow</span><span class="o">.</span><span class="na">calculateBalance</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">id</span><span class="o">));</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">withdraw</span><span class="o">(</span><span class="nc">Money</span> <span class="n">money</span><span class="o">,</span> <span class="nc">AccountId</span> <span class="n">targetAccountId</span><span class="o">)</span> <span class="o">{</span>

		<span class="k">if</span> <span class="o">(!</span><span class="n">mayWithdraw</span><span class="o">(</span><span class="n">money</span><span class="o">))</span> <span class="o">{</span>
			<span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
		<span class="o">}</span>

		<span class="nc">Activity</span> <span class="n">withdrawal</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Activity</span><span class="o">(</span>
				<span class="k">this</span><span class="o">.</span><span class="na">id</span><span class="o">,</span>
				<span class="k">this</span><span class="o">.</span><span class="na">id</span><span class="o">,</span>
				<span class="n">targetAccountId</span><span class="o">,</span>
				<span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">(),</span>
				<span class="n">money</span><span class="o">);</span>
		<span class="k">this</span><span class="o">.</span><span class="na">activityWindow</span><span class="o">.</span><span class="na">addActivity</span><span class="o">(</span><span class="n">withdrawal</span><span class="o">);</span>
		<span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">private</span> <span class="kt">boolean</span> <span class="nf">mayWithdraw</span><span class="o">(</span><span class="nc">Money</span> <span class="n">money</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">return</span> <span class="nc">Money</span><span class="o">.</span><span class="na">add</span><span class="o">(</span>
				<span class="k">this</span><span class="o">.</span><span class="na">calculateBalance</span><span class="o">(),</span>
				<span class="n">money</span><span class="o">.</span><span class="na">negate</span><span class="o">())</span>
				<span class="o">.</span><span class="na">isPositiveOrZero</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">deposit</span><span class="o">(</span><span class="nc">Money</span> <span class="n">money</span><span class="o">,</span> <span class="nc">AccountId</span> <span class="n">sourceAccountId</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">Activity</span> <span class="n">deposit</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Activity</span><span class="o">(</span>
				<span class="k">this</span><span class="o">.</span><span class="na">id</span><span class="o">,</span>
				<span class="n">sourceAccountId</span><span class="o">,</span>
				<span class="k">this</span><span class="o">.</span><span class="na">id</span><span class="o">,</span>
				<span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">(),</span>
				<span class="n">money</span><span class="o">);</span>
		<span class="k">this</span><span class="o">.</span><span class="na">activityWindow</span><span class="o">.</span><span class="na">addActivity</span><span class="o">(</span><span class="n">deposit</span><span class="o">);</span>
		<span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Value</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">AccountId</span> <span class="o">{</span>
		<span class="kd">private</span> <span class="nc">Long</span> <span class="n">value</span><span class="o">;</span>
	<span class="o">}</span>

<span class="o">}</span>
</pre></table></code></div></div><p>계좌에 대한 모든 입금과 출금은 Activity 엔티티에 포착 된다.</p><p>한 계좌에 대한 모든 활동(activity)들은 항상 메모리에 한꺼번에 올리는 것은 현명한 방법이 아니기 때문에 Account 엔티티는 ActivityWindow 값 객체(value object)에서 포착한 지난 며칠 혹은 몇 주간의 범위에 해당하는 활동만 보유한다.</p><h4 id="account-엔티티"><span class="mr-2">Account 엔티티</span><a href="#account-엔티티" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>실제 계좌의 현재 스냅샷을 제공</p><h4 id="activitywindows"><span class="mr-2">ActivityWindows</span><a href="#activitywindows" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>한 계좌에 대한 모든 활동(activity)들을 항상 메모리에 한꺼번에 올리는 것은 현명하지 않으므로 지난 며칠 혹은 몇 주간의 범위 활동만 보유</p><h4 id="baselinebalance"><span class="mr-2">baselineBalance</span><a href="#baselinebalance" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>첫번째 활동 전의 잔고</p><p>현재 총 잔고는 기준 잔고(baseBalance)에 활동 창의 모든 활동들의 잔고를 합한 값</p><h4 id="withdraw-입금-deposit출금"><span class="mr-2">withdraw (입금), deposit(출금)</span><a href="#withdraw-입금-deposit출금" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>새로운 활동을 활동창에 추가</p><p>출금 전에는 잔고를 초과하는 금액을 출금할 수 없도록 비즈니스 규칙 검사</p><h3 id="유스케이스-둘러보기"><span class="mr-2">유스케이스 둘러보기</span><a href="#유스케이스-둘러보기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>일반적으로 유스케이스는 아래와 같은 단계를 따른다.</p><ol><li>입력을 받는다.<li>비즈니스 규칙을 검증한다.<li>모델 상태를 조작한다.<li>출력을 반환한다.</ol><p>유스케이스 코드가 도메인 로직에만 신경 써야 하고 입력 유효성 검증으로 오염되면 안된다. 그래서 입력 유효성 검증은 다른 곳에서 진행해야 한다.</p><p>유스케이스는 <code class="language-plaintext highlighter-rouge">비즈니스 규칙(business rule)</code>을 검증할 책임이 있다. 그리고 도메인 엔티티와 이 책임을 공유한다.</p><p>아래는 <code class="language-plaintext highlighter-rouge">송금하기</code> 유스케이스를 구현한 것이다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">buckpal.account.application.service</span><span class="o">;</span>

<span class="nd">@RequiredArgsConstructor</span>
<span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendMoneyService</span> <span class="kd">implements</span> <span class="nc">SendMoneyUseCase</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="kd">final</span> <span class="nc">LoadAccountPort</span> <span class="n">loadAccountPort</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="nc">AccountLock</span> <span class="n">accountLock</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="nc">UpdateAccountStatePort</span> <span class="n">updateAccountStatePort</span><span class="o">;</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">sendMoney</span><span class="o">(</span><span class="nc">SendMoneyCommand</span> <span class="n">command</span><span class="o">)</span> <span class="o">{</span>
		<span class="c1">// TODO: 비즈니스 규칙 검증</span>
		<span class="c1">// TODO: 모델 상태 조작</span>
		<span class="c1">// TODO: 출력 값 반환</span>
	<span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><img data-src="/assets/img/post/2022-04-17-MakeLearnCleanArchitecture_ch4/2.jpg" alt="image" data-proofer-ignore></p><blockquote><p>하나의 서비스가 하나의 유스케이스를 구현하고, 도메인 모델을 변경하고, 변경된 상태를 저장하기 위해 아웃고잉 포트를 호출한다.</p></blockquote><p>서비스는 인커밍 포트 인터페이스인 <code class="language-plaintext highlighter-rouge">SendMoneyUseCase</code>를 구현하고, 계좌를 불러오기 위해 아웃고잉 포트 인터페이스인 <code class="language-plaintext highlighter-rouge">LoadAccountPort</code>를 호출한다.</p><p>그리고 데이터베이스의 계좌 상태를 업데이트하기 위해 <code class="language-plaintext highlighter-rouge">UpdateAccountStatePort</code>를 호출한다.</p><h3 id="입력-유효성-검증"><span class="mr-2">입력 유효성 검증</span><a href="#입력-유효성-검증" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>애플리케이션 계층해서 입력 유효성을 검증해야 하는 이유는, 그렇게 하지 않을 경우 애플리케이션 코어의 바깥쪽으로부터 유효하지 않은 입력값을 받게 되고, 모델의 상태를 해칠 수 있다.</p><p>따라서 애플리케이션 계층에서 유효성을 검증해야 하지만 유스케이스 클래스에서는 하면 안된다.</p><p>아래는 <code class="language-plaintext highlighter-rouge">SendMoneyCommand</code>클래스의 생성자 내에서 입력 유효성을 검증한다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="nd">@Getter</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendMoneyCommand</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">AccountId</span> <span class="n">sourceAccountId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">AccountId</span> <span class="n">targetAccountId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Money</span> <span class="n">money</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">SendMoneyCommand</span><span class="o">(</span>
            <span class="nc">AccountId</span> <span class="n">sourceAccountId</span><span class="o">,</span>
            <span class="nc">AccountId</span> <span class="n">targetAccountId</span><span class="o">,</span>
            <span class="nc">Money</span> <span class="n">money</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">sourceAccountId</span> <span class="o">=</span> <span class="n">sourceAccountId</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">targetAccountId</span> <span class="o">=</span> <span class="n">targetAccountId</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">money</span> <span class="o">=</span> <span class="n">money</span><span class="o">;</span>
        <span class="n">requireNonNull</span><span class="o">(</span><span class="n">sourceAccountId</span><span class="o">);</span>
        <span class="n">requireNonNull</span><span class="o">(</span><span class="n">targetAccountId</span><span class="o">);</span>
        <span class="n">requireNonNull</span><span class="o">(</span><span class="n">money</span><span class="o">);</span>
        <span class="n">requireGraterThan</span><span class="o">(</span><span class="n">money</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">SendMoneyCommand</code>는 유스케이스 API의 일부이기 때문에 인커밍 포트 패키지에 위치한다. 그러므로 유효성 검증이 애플리케이션의 코어(육각형 아키텍처의 육각형 내부)에 남아 있지만 신성한 유스케이스 코드를 오염시키지는 않는다.</p><h3 id="생성자의-힘"><span class="mr-2">생성자의 힘</span><a href="#생성자의-힘" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>클래스는 불변이기 때문에 생성자의 인자 리스트에는 클래스의 각 속성에 해당하는 파라미터들이 포함돼 있다.</p><p>그뿐만 아니라 생성자가 파라미터의 유효성 검증까지 하고 있기 때문에 유효하지 않은 상태의 객체를 만드는 것은 불가능하다.</p><p>빌더 패턴을 사용하면 긴 파라미터 리스트를 받아야하는 생성자를 private으로 만들고 빌더의 build() 메서드 내부에 생성자를 숨길 수 있다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="k">new</span> <span class="nc">SendMoneyCommandBuilder</span><span class="o">()</span>
		<span class="o">.</span><span class="na">sourceAccountId</span><span class="o">(</span><span class="k">new</span> <span class="nc">AccountId</span><span class="o">(</span><span class="mi">41L</span><span class="o">))</span>
		<span class="o">.</span><span class="na">targetAccountId</span><span class="o">(</span><span class="k">new</span> <span class="nc">AccountId</span><span class="o">(</span><span class="mi">42L</span><span class="o">))</span>
		<span class="c1">// ... 다른 여러 필드를 초기화</span>
		<span class="o">.</span><span class="na">build</span><span class="o">();</span>
</pre></table></code></div></div><p>유효성 검증 로직은 생성자에 그대로 둬서 빌더가 유효하지 않은 상태의 객체를 생성하지 못하도록 막을 수 있다.</p><p>그러나 빌더 패턴의 경우 코드에 새로운 필드를 추가하는 것을 잊었을 경우, 컴파일러가 유효하지 않은 불변 객체를 만들려는 시도에 대해 경고해주지는 못한다.</p><p>그래서 단위테스트 혹은 런타임에서 유효성 검증 로직이 동작해서 누락된 파라미터에 대한 에러를 던질 것이다.</p><p>하지만 생성자를 직접 사용한다면 컴파일 에러에 따라 나머지 코드에 즉각 변경사항을 반영 할 수 있다.</p><h3 id="유스케이스마다-다른-입력-모델"><span class="mr-2">유스케이스마다 다른 입력 모델</span><a href="#유스케이스마다-다른-입력-모델" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p><code class="language-plaintext highlighter-rouge">계좌 등록하기</code>와 <code class="language-plaintext highlighter-rouge">계좌 정보 업데이트하기</code>의 경우 거의 똑같은 계좌 상세 정보가 필요하다.</p><p>그래서 두 유스케이스에서 같은 입력 모델을 공유할 수도 있다.</p><p>그러나 같은 입력 모델을 공유하게 된다면 <code class="language-plaintext highlighter-rouge">계좌 등록하기</code>에서는 소유자 ID에 null 값을 허용해야만 한다.</p><p>불변 커맨드 객체의 필드에 대해서 null은 유효한 상태로 받아들이는 것은 그 자체로 코드 냄새(code smell)다.</p><h3 id="비즈니스-규칙-검증하기"><span class="mr-2">비즈니스 규칙 검증하기</span><a href="#비즈니스-규칙-검증하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>입력 유효성 검증과 비즈니스 규칙 검증은 분명히 유스케이스 로직의 일부이다.</p><p>그런데 언제 입력 유효성을 검증하고 언제 비즈니스 규칙을 검증해야 할까??</p><p>입력 유효성 검증은 <code class="language-plaintext highlighter-rouge">구문상의(syntactical)</code> 유효성으 검증하는 것이라고도 할 수 있고, 반면 비즈니스 규칙은 유스케이스 맥락 속에서 <code class="language-plaintext highlighter-rouge">의미적인(semantical)</code> 유효성을 검증하는 일이라고 할 수 있다.</p><p>예를 들면 <code class="language-plaintext highlighter-rouge">"출금 계좌는 초과 출금되어서는 안된다"</code>는 모델의 현재 상태에 접근하여 출금, 입금 계좌의 존재 유무를 판단해야 하기 때문에 <code class="language-plaintext highlighter-rouge">비즈니스 규칙</code>이다.</p><p>반대로 <code class="language-plaintext highlighter-rouge">"송금되는 금액은 0보다 커야한다."</code>라는 규칙은 모델의 현재 상태와 상관없이 검증 될 수 있기 때문에 <code class="language-plaintext highlighter-rouge">입력 유효성 검증</code>이다.</p><p>비즈니스 규칙의 가장 좋은 위치는 도메인 엔티티 안에 넣는 것이다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Account</span> <span class="o">{</span>
    <span class="c1">// ...</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">withdraw</span><span class="o">(</span><span class="nc">Money</span> <span class="n">money</span><span class="o">,</span> <span class="nc">AccountId</span> <span class="n">targetAccountId</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(!</span><span class="n">mayWithdraw</span><span class="o">(</span><span class="n">money</span><span class="o">)){</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="c1">// ...</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>만약 도메인 엔티티에서 비즈니스 규칙을 검증하기가 여의치 않다면 유스케이스 코드에서 도메인 엔티티를 사용하기 전에 해도 된다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="nd">@RequiredArgConstructor</span>
<span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendMoneyService</span> <span class="kd">implements</span> <span class="nc">SendMoneyUseCase</span> <span class="o">{</span>
    <span class="c1">// ...</span>
    
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">sendMoney</span><span class="o">(</span><span class="nc">SendMoneyCommand</span> <span class="n">command</span><span class="o">){</span>
                <span class="n">requireAccountExists</span><span class="o">(</span><span class="n">command</span><span class="o">.</span><span class="na">getSourceAccountId</span><span class="o">());</span>
                <span class="n">requireAccountExists</span><span class="o">(</span><span class="n">command</span><span class="o">.</span><span class="na">getTargetAccountId</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="풍부한-도메인-모델-vs-빈약한-도메인-모델"><span class="mr-2">풍부한 도메인 모델 vs. 빈약한 도메인 모델</span><a href="#풍부한-도메인-모델-vs-빈약한-도메인-모델" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>DDD 철학을 따르는 <code class="language-plaintext highlighter-rouge">풍부한 도메인 모델(rich domain model)</code>과 <code class="language-plaintext highlighter-rouge">빈약한 도메인 모델(anemic domain model)</code>의 구현에 대해 자주 논의 되는 사항이다.</p><p>풍부한 도메인 모델에서는 애플리케이션의 코어에 있는 엔티티에서 가능한 한 많은 도메인 로직이 구현된다. 엔티티들은 상태를 변경하는 메서드를 제공하고, 비즈니스 규칙에 맞는 유효한 변경만 허용한다.</p><p>또한 많은 비즈니스 규칙이 유스케이스 구현체 대신 엔티티에 위치하게 된다.</p><p>빈약한 도메인 모델에서는 엔티티 자체가 굉장히 얇다. 일반적으로 엔티티는 상태를 표현하는 필드와 이 값을 읽고 바꾸기 위한 getter, setter 메서드만 포함하고 어떤 도메인 로직도 가지고 있지 않는다.</p><p>이 말은 즉, 도메인 로직인 유스케이스 클래스에 구현돼 있다는 것이다. 비즈니스 규칙을 검증하고, 엔티티의 상태를 바꾸고, 데이터베이스 저장을 담당하는 아웃고잉 포트에 엔티티를 전달할 책임 역시 유스케이스 클래스에 있다.</p><p>### 유스케이스 마다 다른 출력 모델</p><p>유스케이스가 할 일을 다하고 나면 호출자에게 무엇을 반환해야 할까?</p><p>입력과 비슷하게 출력도 가능하면 각 유스케이스에 맞게 구체적일수록 좋다. 출력은 호출자에게 꼭 필요한 데이터만 들고 있어야 한다.</p><p><code class="language-plaintext highlighter-rouge">송금하기</code> 유스케이스 코드에서는 boolean 값 하나만 반환했다. 업데이트 된 Account를 통째로 반환하고 싶을 수도 있다.</p><p>이부분은 정답이 없다. 그러나 유스케이스를 가능한 한 구체적으로 유지하기 위해서는 계속 질문해야 한다. 만약 의심스럽다면 가능한 한 적게 반환하자.</p><p>유스케이스들 간에 같은 출력 모델을 공유하게 되면 유스케이스들도 강하게 결합된다. 단일 책임 원칙을 적용하고 모델을 분리해서 유지하는 것은 유스케이스의 결합을 제거하는 데 도움이 된다.</p><p>같은 이유로 도메인 엔티티를 출력 모델로 사용하고 싶은 유혹도 견뎌야 한다.</p><p>### 읽기 전용 유스케이스는 어떨까?</p><p><code class="language-plaintext highlighter-rouge">계좌 잔고 보여주기</code> 같은 특정 유스케이스의 경우에도 다른 유스케이스와 비슷한 방식으로 구현해야 한다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">buckpal.application.service</span><span class="o">;</span>

<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">class</span> <span class="nc">GetAccountBalanceService</span> <span class="kd">implements</span> <span class="nc">GetAccountBalanceQuery</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="nc">LoadAccountPort</span> <span class="n">loadAccountPort</span><span class="o">;</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="nc">Money</span> <span class="nf">getAccountBalance</span><span class="o">(</span><span class="nc">AccountId</span><span class="o">,</span> <span class="n">accountId</span><span class="o">){</span>
		<span class="k">return</span> <span class="n">loadAccountPort</span><span class="o">.</span><span class="na">loadAccount</span><span class="o">(</span><span class="n">accoutId</span><span class="o">,</span> <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">()).</span><span class="na">calculateBalance</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>쿼리 서비스는 유스케이스 서비스와 동일한 방식으로 동작한다. <code class="language-plaintext highlighter-rouge">GetAccountBalanceQuery</code>라는 인커밍 포트를 구현하고, 데이터베이스로부터 실제로 데이터를 로드하기 위해 <code class="language-plaintext highlighter-rouge">LoadAccountPort</code>라는 아웃고잉 포트를 호출한다.</p><p>이처럼 읽기 전용 쿼리는 쓰기가 가능한 유스케이스(또는 커맨드)와 코드 상에서 명확하게 구분된다.</p><p>이러한 방식은 CQS(Command-Query Separation)나 CQRS(Command-Query Responsibility Segregation) 같은 개념과 아주 잘 맞는다.</p><blockquote><p>CQRS란? 흔히 말하는 CRUD(Create, Read, Update, Delete)에서 CUD(Command)와 R(Query)를 구분하자는 것. <br /> <code class="language-plaintext highlighter-rouge">CQRS의 장점</code> <br /> Read와 CUD 각각에 더 최적화된 Database 구성을 통해서 성능을 더 향상시킬 수 있다. <br /> Read와 CUD에서 필요한 데이터 형식이 다를 수 있고, 특히 Read는 aggregation(집계 함수) 등의 부가적인 attribute들이 Entity에 필요하게 될 수 있다. <br /> R과 CUD를 분리함으로써 R로 인해 Entity의 구조가 변경되는 것을 막을 수 있다. <br /> R과 CUD를 분리함으로써 과도하게 복잡한 모델을 덜 복합하게 만듦으로서 시스템 복잡도를 줄일 수 있다. <br /> 출처: Log.bluayer</p></blockquote><h3 id="유지보수-가능한-소프트웨어를-만드는-데-어떻게-도움이-될까"><span class="mr-2">유지보수 가능한 소프트웨어를 만드는 데 어떻게 도움이 될까?</span><a href="#유지보수-가능한-소프트웨어를-만드는-데-어떻게-도움이-될까" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>이 책의 아키텍처에서는 도메인 로직을 우리가 윈하는 대로 구현할 수 있도록 허용하지만, 입력 출력 모델을 독립적으로 모델링한다면 원치 않는 부수효과를 피할 수 있다.</p><p>물론 유스케이스 간에 모델을 공유하는 것보다는 더 많은 작업이 필요하다.</p><p>꼼꼼한 입력 유효성 검증, 유스케이스별 입출력 모델은 지속 가능한 코드를 만드는 데 큰 도움이 된다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/ddd/'>DDD</a>, <a href='/categories/%EB%A7%8C%EB%93%A4%EB%A9%B4%EC%84%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-%ED%81%B4%EB%A6%B0-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98/'>만들면서 배우는 클린 아키텍처</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ddd/" class="post-tag no-text-decoration" >DDD</a> <a href="/tags/cleanarchitecture/" class="post-tag no-text-decoration" >CleanArchitecture</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=4%EC%9E%A5.+%EC%9C%A0%EC%8A%A4%EC%BC%80%EC%9D%B4%EC%8A%A4+%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0+-+%EC%9E%94%EB%8B%A4%EB%A6%AC+%EB%B8%94%EB%A1%9C%EA%B7%B8&url=https%3A%2F%2Fjandari91.github.io%2Fposts%2FMakeLearnCleanArchitecture_ch4%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=4%EC%9E%A5.+%EC%9C%A0%EC%8A%A4%EC%BC%80%EC%9D%B4%EC%8A%A4+%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0+-+%EC%9E%94%EB%8B%A4%EB%A6%AC+%EB%B8%94%EB%A1%9C%EA%B7%B8&u=https%3A%2F%2Fjandari91.github.io%2Fposts%2FMakeLearnCleanArchitecture_ch4%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fjandari91.github.io%2Fposts%2FMakeLearnCleanArchitecture_ch4%2F&text=4%EC%9E%A5.+%EC%9C%A0%EC%8A%A4%EC%BC%80%EC%9D%B4%EC%8A%A4+%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0+-+%EC%9E%94%EB%8B%A4%EB%A6%AC+%EB%B8%94%EB%A1%9C%EA%B7%B8" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div><script src="https://utteranc.es/client.js" repo="Jandari91/Jandari91.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ddd/">DDD</a> <a class="post-tag" href="/tags/cleanarchitecture/">CleanArchitecture</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/setup/">Setup</a> <a class="post-tag" href="/tags/net/">.NET</a> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/cuda/">CUDA</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/fastapi/">FastAPI</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/MakeLearnCleanArchitecture_ch1/"><div class="card-body"> <em class="timeago small" data-ts="1649769300" > 2022-04-12 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>1장. 계층형 아키텍처의 문제는 무엇일까?</h3><div class="text-muted small"><p> 소개 만들면서 배우는 클린 아키텍처 책을 읽고 정리하며 소감을 적는 포스트입니다. 계층형 아키텍처의 문제점 웹 계층, 도메인 계층, 영속성 계층으로 구성된 전통적인 웹 애플리케이션 구조 계층형 아키텍처는 맨 위의 웹 계층에서 요청을 받아 도메인 계층에 있는 서비스로 요청을 보낸다. 서비스에서는 필요한 비즈니스 로직을 수행하고, 도...</p></div></div></a></div><div class="card"> <a href="/posts/MakeLearnCleanArchitecture_ch2/"><div class="card-body"> <em class="timeago small" data-ts="1649830800" > 2022-04-13 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>2장. 의존성 역전하기</h3><div class="text-muted small"><p> 소개 만들면서 배우는 클린 아키텍처 책을 읽고 정리하며 소감을 적는 포스트입니다. 의존성 역전하기 단일 책임 원칙(SRP, Single Responsibility Principle) 우리가 잘 알고 있는 정의는 하나의 컴포넌트는 오로지 한 가지 일만 해야하고, 그것을 올바르게 수행해야 한다. 하지만 실제 정의는 컴포넌트를 ...</p></div></div></a></div><div class="card"> <a href="/posts/MakeLearnCleanArchitecture_ch3/"><div class="card-body"> <em class="timeago small" data-ts="1649942400" > 2022-04-14 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>3장. 코드 구성하기</h3><div class="text-muted small"><p> 소개 만들면서 배우는 클린 아키텍처 책을 읽고 정리하며 소감을 적는 포스트입니다. 코드 구성하기 코드를 보는 것만으로도 아키텍처가 파악 된다면 굉장히 좋을 것입니다. 이번 포스트는 BuckPal 예제 코드를 구조화 하기 위해 육각형 아키텍처를 직접 레이아웃을 구성하도록 하겠습니다. 아래는 사용자가 본인의 계좌에서 다른 계좌로 돈을 송금할 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/MakeLearnCleanArchitecture_ch3/" class="btn btn-outline-primary" prompt="Older"><p>3장. 코드 구성하기</p></a> <a href="/posts/MakeLearnCleanArchitecture_ch5/" class="btn btn-outline-primary" prompt="Newer"><p>5장. 웹 어댑터 구현하기</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/Jandari91">Jandari</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ddd/">DDD</a> <a class="post-tag" href="/tags/cleanarchitecture/">CleanArchitecture</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/setup/">Setup</a> <a class="post-tag" href="/tags/net/">.NET</a> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/cuda/">CUDA</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/fastapi/">FastAPI</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
