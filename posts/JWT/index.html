<!DOCTYPE html><html lang="ko" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="JWT(Json Web Token)" /><meta name="author" content="Jandari" /><meta property="og:locale" content="ko" /><meta name="description" content="소개" /><meta property="og:description" content="소개" /><link rel="canonical" href="https://jandari91.github.io/posts/JWT/" /><meta property="og:url" content="https://jandari91.github.io/posts/JWT/" /><meta property="og:site_name" content="잔다리 블로그" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-10-18T13:30:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="JWT(Json Web Token)" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Jandari" /><meta name="google-site-verification" content="da_LBuBJEqXgeCF1kMfTTgAPN1j1AqAZOSfvbZ512vw" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jandari"},"dateModified":"2022-10-18T13:30:00+09:00","datePublished":"2022-10-18T13:30:00+09:00","description":"소개","headline":"JWT(Json Web Token)","mainEntityOfPage":{"@type":"WebPage","@id":"https://jandari91.github.io/posts/JWT/"},"url":"https://jandari91.github.io/posts/JWT/"}</script><title>JWT(Json Web Token) | 잔다리 블로그</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.jpg"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.jpg"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.jpg"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="잔다리 블로그"><meta name="application-name" content="잔다리 블로그"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/favicons/android-chrome-192x192.jpg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">잔다리 블로그</a></div><div class="site-subtitle font-italic">이것저것 기술 블로그 입니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/Jandari91" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['jandari910201','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>JWT(Json Web Token)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>JWT(Json Web Token)</h1><div class="post-meta text-muted"><div> By <em> Jandari </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1666067400" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-10-18 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2297 words"> <em>12 min</em> read</span></div></div></div><div class="post-content"><h1 id="소개">소개</h1><p>개발을 하다 보면 로그인 관련 기능을 만드는 경우가 많습니다.</p><p>로그인은 쿠키(Cookie), 세션(Sessions) 등으로 많이 구현하는데, 토큰(Token)을 사용하는 방법도 있습니다.</p><p>토큰을 사용하는 방법 중 JWT를 많이 사용하기에 JWT에 대해 정리하려고 합니다.</p><h2 id="jwt"><span class="mr-2"><a href="https://jwt.io/introduction"><span class="mr-2">JWT</a></span><a href="#jwt" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>JWT(JSON Web Token)는 일반적으로 클라이언트(App FrontEnd)와 서버(App BackEnd)간에 정보를 공유하는 데 사용되는 개방형 산업 표준(RFC7519)입니다.</p><p>JWT는 Token 자체를 정보로 사용하는 Self-Contained 방식이며, 필요한 모든 정보를 Token에 저장하기 때문에 서버와의 커뮤니케이션에서 오버헤드를 최소화 할 수 있습니다.</p><p>또한 JSON Content(JWT Claim이라고도 함)을 변경 할 수 없도록 암호화(해싱)되어 있습니다.</p><p>아래는 Google에 로그인하면 Claim/JSON Payload가 포함 된 JWT를 발생합니다.</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"iss"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://accounts.google.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"azp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234987819200.apps.googleusercontent.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"aud"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234987819200.apps.googleusercontent.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10769150350006150715113082367"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"at_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HK6E_P6Dh8Y93mRNtsDB1Q"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jsmith@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email_verified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"iat"</span><span class="p">:</span><span class="w"> </span><span class="mi">1353601026</span><span class="p">,</span><span class="w">
    </span><span class="nl">"exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1353604926</span><span class="p">,</span><span class="w">
    </span><span class="nl">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0394852-3190485-2490358"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"hd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><h2 id="jwt-구조"><span class="mr-2">JWT 구조</span><a href="#jwt-구조" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>JWT는 <code class="language-plaintext highlighter-rouge">Base64Url</code>로 인코딩 되어 있고 마침표(.)로 구분 된 세 부분으로 구성되어 있습니다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>[header.payload.signature]

eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.
eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.
tM-nO0TjFp-sF0-TYWjXKX_r9jEZvO1YWjKnWfIDWtM
</pre></table></code></div></div><p><img data-src="/assets/img/post/2022-10-18-JWT/1.jpg" alt="image" data-proofer-ignore></p><ul><li>Header : Token 유형에 대한 메타데이터와 해당 콘텐츠를 보호하는 데 사용되는 암호화 알고리즘을 포함합니다.<li>Payload(Claim Set) : 사용자의 ID 및 허용 된 권한과 같은 검증 가능한 보안 설명이 포함 되어 있습니다.<li>Signature : Json Payload의 무결성을 확인하는 데 사용할 수 있는 암호화 알고리즘을 통해 생성 된 문자열 입니다.</ul><p>아래 페이지에서 확인 가능 합니다.</p><ul><li><a href="https://jwt.io/?_ga=2.110543749.1480193380.1666070190-535722928.1666070190&amp;_gl=1*1a6ravf*rollup_ga*NTM1NzIyOTI4LjE2NjYwNzAxOTA.*rollup_ga_F1G3E656YZ*MTY2NjA3MDE4OS4xLjAuMTY2NjA3MDE4OS42MC4wLjA.">JWT Debugger</a></ul><p><img data-src="/assets/img/post/2022-10-18-JWT/2.jpg" alt="image" data-proofer-ignore></p><h4 id="header"><span class="mr-2">Header</span><a href="#header" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>암호화 작업을 설명하는 매개변수가 포함 된 JSON 객체 입니다.</p><p>사용 중인 알고리즘과 Type을 기술합니다.</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"alg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HS256"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JWT"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>[JSON 객체]
Base64URLSafe(UTF-8('{"alg": "HS256","type": "JWT"}'))

[직렬화]
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9

</pre></table></code></div></div><h4 id="payload"><span class="mr-2">Payload</span><a href="#payload" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>페이로드에는 엔티티(일반적인 사용자 정보)에 대한 설명과 Claim이라고 하는 추가 엔티티 속성이 포함 됩니다.</p><p>아래 속성들을 <code class="language-plaintext highlighter-rouge">Claim Set</code>이라 부른다.</p><ul><li>Claim Set<ul><li>JWT에 대한 내용(토큰 생성자 정보, 생성 시간 등)<li>클라이언트와 서버 간 주고 받기로 한 값들로 구성</ul></ul><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"sub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"admin"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>[JSON 객체]
Base64URLSafe(UTF-8('{"sub": "1234567890","name": "John Doe","admin": true}'))

[직렬화]
eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ

</pre></table></code></div></div><h4 id="signature"><span class="mr-2">Signature</span><a href="#signature" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>서명은 JWT를 보낸 사람이 누구인지 확인하고 메시지가 도중에 변경되지 않았는지 확인하는 데 사용됩니다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>[Signature]

HMACSHA256(
  base64UrlEncode(header) + "." +
  base64UrlEncode(payload),
tqQWhz5BCP(your-256-bit-secret-key)
) 

[직렬화]
tM-nO0TjFp-sF0-TYWjXKX_r9jEZvO1YWjKnWfIDWtM
</pre></table></code></div></div><h2 id="jwt-작동-원리"><span class="mr-2">JWT 작동 원리</span><a href="#jwt-작동-원리" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/assets/img/post/2022-10-18-JWT/3.jpg" alt="image" data-proofer-ignore></p><ol><li>사용자가 ID와 Password를 입력하여 로그인을 시도합니다.<li>서버는 요청을 확인하고 Secret Key를 통해 Access Token을 발급합니다.<li>JWT 토큰을 클라이언트에 전달합니다.<li>클라이언트에서 API을 요청할 때, 클라이언트가 Authorization Header에 Access Token을 담아서 보냅니다.<li>서버는 JWT Signature를 체크하고 Payload로 부터 사용자 정볼르 확인해 데이터를 반환합니다.<li>클라이언트의 로그인 정보를 서버 메모리에 저장하지 않기 때문에 토큰 기반 인증 메커니즘을 제공합니다.</ol><p>인증이 필요한 경로에 접근 할 때 서버 측은 Authorization 헤더에 유효한 JWT 또는 존재하는지 확인한다.</p><p>JWT에는 필요한 모든 정보를 토큰에 포함하기 때문에 데이터베이스와 같은 서버와의 커뮤니케이션 오버 헤드를 최호화 할 수 있다.</p><p>Cross-Origin Resources Sharing(CORS)는 쿠키를 사용하지 않기 때문에 JWT를 채용 한 인증 메커니즘은 두 도메인에서 API를 제공하더라도 문제가 발생하지 않습니다.</p><p>일반적으로 JWT 토큰 기반의 인증 시스템은 위와 같은 프로세스로 이루어집니다. 처음 사용자를 등록 할 때 Access Token과 Refresh token이 모두 발급되어야 합니다.</p><h2 id="jwt-장단점"><span class="mr-2">JWT 장단점</span><a href="#jwt-장단점" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h4 id="장점"><span class="mr-2">장점</span><a href="#장점" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><ul><li>보안 : JWT는 클라이언트나 해커가 수정하지 못하도록 보호하는 비밀(HMAC) 또는 공개/개인 키 쌍(RSA 또는 ECDSA)를 사용하여 디지털 서명됩니다.<li>클라이언트에만 저장 : 서버에서 JWT를 생성하여 클라이언트로 보냅니다. 그런 다음 클라이언트는 모든 요청과 함께 JWT를 제출합니다. 이것은 데이터베이스의 공간을 절약 할 수 있습니다.<li>Efficient / Stateless : 데이터베이스 조회가 필요하지 않기 때문에 JWT를 빠르게 검증 할 수 있습니다. 이는 대규모 분산 시스템에서 특히 유용합니다.</ul><h4 id="단점"><span class="mr-2">단점</span><a href="#단점" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><ul><li>취소 기능 : 자체 포함 된 속성 및 상태 확인 프로세스로 인해 JWT가 자연적으로 만료 되기 전에는 취소하기가 어렵습니다. 따라서 사용자를 즉시 차단하는 것과 같은 조치는 쉽게 구현 할 수 없습니다. (<a href="https://supertokens.com/blog/revoking-access-with-a-jwt-blacklist">JWT 거부 및 블랙리스트</a>로 취소 가능 하지만 어렵습니다.)<li>사용자 정보 수정 : 취소 기능가 마찬가지로 발급 된 JWT는 수정이 불가능 하기 때문에 사용자의 정보를 데이터베이스에서 수정 했더라도 즉시 적용이 어렵습니다.<li>1개의 Private 키 종속적 : JWT는 1개의 Private 키에 따라 달라집니다. 해당 키가 손상되면 공격자는 API 계층이 수락할 자체 JWT를 조작 할 수 있습니다.<li>트래픽 : Stateless 애플리케이션에서 토큰은 거의 모든 요청에 대해 전송 되므로 데이터 트래픽이 증가 할 수 있습니다.</ul><h2 id="claim"><span class="mr-2">Claim</span><a href="#claim" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>JWT는 Claim에 이름/값 쌍으로 여러 정보를 넣을 수 있습니다. JWT Claim에는 아래와 같은 두 가지 유형이 있습니다.</p><ul><li><code class="language-plaintext highlighter-rouge">Registered</code> : 등록 된 <a href="https://www.iana.org/assignments/jwt/jwt.xhtml">표준 Claim</a>에 의해 정의되고 <a href="https://www.rfc-editor.org/rfc/rfc7519">JWT 사양</a> 타사 또는 외부 응용 프로그램과의 상호 운용성을 보장합니다.<li><code class="language-plaintext highlighter-rouge">Custom</code> : 등록 되지 않은 public 또는 private claim으로 구성 됩니다.<ul><li>Public Claim : JWT를 사용하는 사람들 마음대로 정의 할 수 있습니다. 그러나 충돌을 방지하려면 <a href="https://www.iana.org/assignments/jwt/jwt.xhtml">IANA JWT Registry</a>에 등록해야 합니다.<li>Private Claim : Private으로 당사자 간의 정보를 공유하기 위해 생성 하는 맞춤형 Claim입니다.</ul></ul><h3 id="registered-claim"><span class="mr-2">Registered Claim</span><a href="#registered-claim" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>JWT 사양은 필수는 아니지만 상호 운용성을 위해 아래와 같이 권장하는 7개의 예약 Claim이 있습니다.</p><ul><li><code class="language-plaintext highlighter-rouge">iss(발급자)</code> : JWT 발행자<li><code class="language-plaintext highlighter-rouge">sub(주제)</code> : JWT의 주제(사용자)<li><code class="language-plaintext highlighter-rouge">aud(청중)</code> : JWT가 의도 된 수신자<li><code class="language-plaintext highlighter-rouge">exp(만료 시간)</code> : JWT가 만료되는 시간<li><code class="language-plaintext highlighter-rouge">nbf(not before time)</code> : JWT가 처리를 위해 수락 되어서는 안 되는 시간<li><code class="language-plaintext highlighter-rouge">iat(발행 시간)</code> : JWT가 발행 된 시간. JWT의 나이를 결정하는 데 사용 할 수 있습니다.<li><code class="language-plaintext highlighter-rouge">jti(JWT ID)</code> : 고유 식별자. JWT가 재생되는 것을 방지함</ul><h3 id="custom-claim"><span class="mr-2">Custom Claim</span><a href="#custom-claim" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>사용자가 자신에게 맞는 Claim을 정의하고 Actions를 사용하여 토큰을에 추가 할 수 있습니다.</p><p>아래와 같이 사용 가능 합니다.</p><ul><li>사용자의 이메일 주소를 액세스 토큰에 추가하고 이를 사용하여 사용자를 고유하게 식별합니다.<li>Auth0 사용자 프로필에 저장 된 사용자 지정 정보를 ID 토큰에 추가합니다.</ul><h4 id="1-public-claim"><span class="mr-2">1. Public Claim</span><a href="#1-public-claim" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>이름 및 이메일과 같은 일반 정보를 포함할 수 있는 공개 사용을 위한 사용자 지정 Claim을 만들 수 있습니다.</p><p>공개 Claim을 생성하는 경우 이를 등록하거나 네임스페이스를 통해 충돌 방지 이름을 사용하야 합니다. 아래는 IANA JWT Registry](https://www.iana.org/assignments/jwt/jwt.xhtml)에 등록 된 Public Claim 입니다.</p><ul><li><code class="language-plaintext highlighter-rouge">auth_time</code><li><code class="language-plaintext highlighter-rouge">acr</code><li><code class="language-plaintext highlighter-rouge">nonce</code></ul><h4 id="2-private-claim"><span class="mr-2">2. Private Claim</span><a href="#2-private-claim" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>개인 사용자 지정 Claim을 만들어 응용 프로그램과 관련 된 정보를 공유할 수 있습니다.</p><p>예를 들어 Public Claim 같은 경우 이름 및 이메일과 같은 일반적인 정보라면 Private Claim은 직원 ID, 부서 이름과 같은 더 구체적인 Claim을 만들 수 있습니다.</p><h2 id="참고"><span class="mr-2">참고</span><a href="#참고" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>https://jwt.io/introduction<li>https://supertokens.com/blog/what-is-jwt<li>http://www.opennaru.com/opennaru-blog/jwt-json-web-token/</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%EB%B3%B4%EC%95%88/'>보안</a>, <a href='/categories/%EC%9D%B8%EC%A6%9D/'>인증</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/%EB%B3%B4%EC%95%88/" class="post-tag no-text-decoration" >보안</a> <a href="/tags/%EC%9D%B8%EC%A6%9D/" class="post-tag no-text-decoration" >인증</a> <a href="/tags/token/" class="post-tag no-text-decoration" >Token</a> <a href="/tags/jwt/" class="post-tag no-text-decoration" >JWT</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=JWT%28Json+Web+Token%29+-+%EC%9E%94%EB%8B%A4%EB%A6%AC+%EB%B8%94%EB%A1%9C%EA%B7%B8&url=https%3A%2F%2Fjandari91.github.io%2Fposts%2FJWT%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=JWT%28Json+Web+Token%29+-+%EC%9E%94%EB%8B%A4%EB%A6%AC+%EB%B8%94%EB%A1%9C%EA%B7%B8&u=https%3A%2F%2Fjandari91.github.io%2Fposts%2FJWT%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fjandari91.github.io%2Fposts%2FJWT%2F&text=JWT%28Json+Web+Token%29+-+%EC%9E%94%EB%8B%A4%EB%A6%AC+%EB%B8%94%EB%A1%9C%EA%B7%B8" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div><script src="https://utteranc.es/client.js" repo="Jandari91/Jandari91.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ddd/">DDD</a> <a class="post-tag" href="/tags/cleanarchitecture/">CleanArchitecture</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/setup/">Setup</a> <a class="post-tag" href="/tags/net/">.NET</a> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/cuda/">CUDA</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/fastapi/">FastAPI</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/JWT_Refresh/"><div class="card-body"> <em class="timeago small" data-ts="1666931400" > 2022-10-28 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>JWT의 Access Token과 Refresh Token</h3><div class="text-muted small"><p> 소개 JWT를 사용하여 로그인을 구현하게 되면 아래와 같은 문제점에 부딪히게 됩니다. Token 방식의 인증은 제 3자에게 탈취 당할 경우 보안에 매우 취약합니다. 보안 상의 이유로 Access Token의 만료기간을 짧게 가진다면 사용자는 Token이 만료 될 때마다 매번 로그인을 새롭게 해야합니다. 만료기간을 늘리면, Token을 탈취 당했...</p></div></div></a></div><div class="card"> <a href="/posts/Rust_Execute/"><div class="card-body"> <em class="timeago small" data-ts="1673010000" > 2023-01-06 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Rust 단일 파일 실행하기</h3><div class="text-muted small"><p></p></div></div></a></div><div class="card"> <a href="/posts/Rust_Install/"><div class="card-body"> <em class="timeago small" data-ts="1673010000" > 2023-01-06 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Rust 설치 및 VS Code 셋팅(Linux, Debian)</h3><div class="text-muted small"><p> 소개 최근 Rust에 관심이 생겨 Rust를 공부하고 있습니다. 제가 집에서 사용하는 PC는 Mint Linux로 Debian 계열의 리눅스를 사용하고 있습니다. Linux에 Rust를 설치하는 방법과 VS Code에서 Rust를 사용하는 방법에 대해 정리하겠습니다. Rust 설치 리눅스에서 Rust를 설치하는 방법은 3가지가 있습니다. ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/VisitorPattern/" class="btn btn-outline-primary" prompt="Older"><p>Visitor 패턴</p></a> <a href="/posts/JWT_Refresh/" class="btn btn-outline-primary" prompt="Newer"><p>JWT의 Access Token과 Refresh Token</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/Jandari91">Jandari</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ddd/">DDD</a> <a class="post-tag" href="/tags/cleanarchitecture/">CleanArchitecture</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/setup/">Setup</a> <a class="post-tag" href="/tags/net/">.NET</a> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/cuda/">CUDA</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/fastapi/">FastAPI</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
